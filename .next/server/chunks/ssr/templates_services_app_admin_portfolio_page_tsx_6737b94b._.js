module.exports=[583449,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(915618),e=a.i(806053),e=e,f=a.i(781560),g=a.i(821374),h=a.i(477859),h=h,i=a.i(813648),i=i,j=a.i(633508),k=a.i(452495),l=a.i(849625),l=l,m=a.i(176537),m=m,n=a.i(667937),n=n,o=a.i(976794),p=a.i(365025),q=a.i(956572);let r={title:"",description:"",client_name:"",service_id:"",category:"",images:[],before_image_url:"",after_image_url:"",external_url:"",project_date:"",results:"",tags:"",is_featured:!1,is_active:!0,testimonial_quote:"",testimonial_author:"",testimonial_role:"",testimonial_rating:5};function s(){let[a,s]=(0,c.useState)([]),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)(!0),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)(r),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(!1);async function H(){try{let a=localStorage.getItem("admin_token"),[b,c]=await Promise.all([fetch("/api/admin/portfolio",{headers:{Authorization:`Bearer ${a}`}}),fetch("/api/admin/services",{headers:{Authorization:`Bearer ${a}`}})]);if(b.ok){let a=await b.json();s(a)}if(c.ok){let a=await c.json();u(a)}}catch(a){console.error("Error fetching data:",a)}finally{w(!1)}}function I(){A(null),C(r),y(!0)}async function J(){if(B.title.trim()){E(!0);try{let a=localStorage.getItem("admin_token"),b=B.testimonial_quote.trim()?{quote:B.testimonial_quote,author:B.testimonial_author||"Anonymous",role:B.testimonial_role||void 0,rating:B.testimonial_rating||void 0}:null,c={title:B.title,description:B.description||null,client_name:B.client_name||null,service_id:B.service_id||null,category:B.category||null,images:B.images,before_image_url:B.before_image_url||null,after_image_url:B.after_image_url||null,external_url:B.external_url||null,project_date:B.project_date||null,results:B.results||null,tags:B.tags.split(",").map(a=>a.trim()).filter(Boolean),is_featured:B.is_featured,is_active:B.is_active,testimonial:b},d=z?`/api/admin/portfolio/${z.id}`:"/api/admin/portfolio",e=z?"PUT":"POST";(await fetch(d,{method:e,headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(c)})).ok&&(y(!1),H())}catch(a){console.error("Error saving portfolio item:",a)}finally{E(!1)}}}async function K(a){if(confirm("Are you sure you want to delete this portfolio item?"))try{let b=localStorage.getItem("admin_token");(await fetch(`/api/admin/portfolio/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${b}`}})).ok&&H()}catch(a){console.error("Error deleting portfolio item:",a)}}async function L(a){try{let b=localStorage.getItem("admin_token");await fetch(`/api/admin/portfolio/${a.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify({is_active:!a.is_active})}),H()}catch(a){console.error("Error toggling active:",a)}}async function M(a){try{let b=localStorage.getItem("admin_token");await fetch(`/api/admin/portfolio/${a.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify({is_featured:!a.is_featured})}),H()}catch(a){console.error("Error toggling featured:",a)}}return(0,c.useEffect)(()=>{H()},[]),v?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)("p",{className:"text-gray-500",children:"Loading portfolio..."})}):(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Portfolio"}),(0,b.jsx)("p",{className:"text-gray-500 mt-1",children:"Showcase your work with project galleries and before/after comparisons"})]}),(0,b.jsxs)("button",{onClick:I,className:"flex items-center gap-2 bg-brand text-gray-900 font-semibold px-4 py-2 rounded-lg hover:bg-brand-dark transition-colors",children:[(0,b.jsx)(d.Plus,{className:"w-5 h-5"}),"Add Project"]})]}),0===a.length?(0,b.jsxs)("div",{className:"bg-white rounded-xl p-12 text-center border border-gray-100",children:[(0,b.jsx)(m.default,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-500 mb-4",children:"No portfolio items yet"}),(0,b.jsxs)("button",{onClick:I,className:"inline-flex items-center gap-2 bg-brand text-gray-900 font-semibold px-6 py-3 rounded-lg hover:bg-brand-dark transition-colors",children:[(0,b.jsx)(d.Plus,{className:"w-5 h-5"}),"Create Your First Project"]})]}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(a=>(0,b.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100 overflow-hidden hover:shadow-md transition-shadow",children:[(0,b.jsxs)("div",{className:"aspect-video bg-gray-100 relative",children:[a.images?.[0]?.url?(0,b.jsx)("img",{src:a.images[0].url,alt:a.title,className:"w-full h-full object-cover"}):a.before_image_url&&a.after_image_url?(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center text-sm text-gray-500",children:"Before/After Available"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,b.jsx)(l.default,{className:"w-12 h-12 text-gray-300"})}),(0,b.jsxs)("div",{className:"absolute top-2 left-2 flex gap-2",children:[a.is_featured&&(0,b.jsx)("span",{className:"bg-yellow-500 text-white text-xs font-medium px-2 py-1 rounded",children:"Featured"}),!a.is_active&&(0,b.jsx)("span",{className:"bg-gray-500 text-white text-xs font-medium px-2 py-1 rounded",children:"Hidden"})]})]}),(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900 line-clamp-1",children:a.title}),a.client_name&&(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:["Client: ",a.client_name]}),a.service_name&&(0,b.jsx)("p",{className:"text-sm text-gray-500",children:a.service_name}),a.category&&(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-1 capitalize",children:a.category}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t border-gray-100",children:[(0,b.jsx)("button",{onClick:()=>M(a),className:`p-2 rounded-lg ${a.is_featured?"text-yellow-600 bg-yellow-50":"text-gray-400 hover:bg-gray-100"}`,title:a.is_featured?"Remove from featured":"Mark as featured",children:(0,b.jsx)(g.Star,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>L(a),className:`p-2 rounded-lg ${a.is_active?"text-green-600 bg-green-50":"text-gray-400 hover:bg-gray-100"}`,title:a.is_active?"Hide from portfolio":"Show on portfolio",children:a.is_active?(0,b.jsx)(h.default,{className:"w-4 h-4"}):(0,b.jsx)(i.default,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>{A(a),C({title:a.title||"",description:a.description||"",client_name:a.client_name||"",service_id:a.service_id||"",category:a.category||"",images:a.images||[],before_image_url:a.before_image_url||"",after_image_url:a.after_image_url||"",external_url:a.external_url||"",project_date:a.project_date?a.project_date.split("T")[0]:"",results:a.results||"",tags:(a.tags||[]).join(", "),is_featured:a.is_featured||!1,is_active:!1!==a.is_active,testimonial_quote:a.testimonial?.quote||"",testimonial_author:a.testimonial?.author||"",testimonial_role:a.testimonial?.role||"",testimonial_rating:a.testimonial?.rating||5}),y(!0)},className:"p-2 rounded-lg text-gray-600 hover:bg-gray-100",title:"Edit",children:(0,b.jsx)(e.default,{className:"w-4 h-4"})}),a.external_url&&(0,b.jsx)("a",{href:a.external_url,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg text-gray-600 hover:bg-gray-100",title:"View external link",children:(0,b.jsx)(k.ExternalLink,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>K(a.id),className:"p-2 rounded-lg text-red-600 hover:bg-red-50 ml-auto",title:"Delete",children:(0,b.jsx)(f.Trash2,{className:"w-4 h-4"})})]})]})]},a.id))}),x&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:z?"Edit Project":"New Project"}),(0,b.jsx)("button",{onClick:()=>y(!1),className:"p-2 rounded-lg text-gray-400 hover:bg-gray-100",children:(0,b.jsx)(j.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("h3",{className:"font-medium text-gray-700 flex items-center gap-2",children:[(0,b.jsx)(m.default,{className:"w-4 h-4"}),"Basic Information"]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Title *"}),(0,b.jsx)("input",{type:"text",value:B.title,onChange:a=>C({...B,title:a.target.value}),placeholder:"e.g., Kitchen Renovation for Smith Family",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client Name"}),(0,b.jsx)("input",{type:"text",value:B.client_name,onChange:a=>C({...B,client_name:a.target.value}),placeholder:"e.g., John Smith",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Date"}),(0,b.jsx)("input",{type:"date",value:B.project_date,onChange:a=>C({...B,project_date:a.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Related Service"}),(0,b.jsxs)("select",{value:B.service_id,onChange:a=>C({...B,service_id:a.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand",children:[(0,b.jsx)("option",{value:"",children:"None"}),t.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,b.jsxs)("select",{value:B.category,onChange:a=>C({...B,category:a.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand",children:[(0,b.jsx)("option",{value:"",children:"None"}),q.portfolioCategories.map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},a.value))]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,b.jsx)("textarea",{value:B.description,onChange:a=>C({...B,description:a.target.value}),rows:3,placeholder:"Describe the project, challenges, and solutions...",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Results / Outcomes"}),(0,b.jsx)("textarea",{value:B.results,onChange:a=>C({...B,results:a.target.value}),rows:2,placeholder:"e.g., Increased home value by 15%, Completed 2 weeks ahead of schedule...",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags (comma-separated)"}),(0,b.jsx)("input",{type:"text",value:B.tags,onChange:a=>C({...B,tags:a.target.value}),placeholder:"e.g., renovation, residential, kitchen",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand"})]})]}),(0,b.jsxs)("div",{className:"space-y-4 pt-4 border-t border-gray-100",children:[(0,b.jsxs)("h3",{className:"font-medium text-gray-700 flex items-center gap-2",children:[(0,b.jsx)(l.default,{className:"w-4 h-4"}),"Project Images"]}),(0,b.jsx)(o.MultiImageUpload,{images:B.images,onChange:a=>C({...B,images:a}),maxImages:10,label:"Gallery Images"})]}),(0,b.jsxs)("div",{className:"space-y-4 pt-4 border-t border-gray-100",children:[(0,b.jsxs)("h3",{className:"font-medium text-gray-700 flex items-center gap-2",children:[(0,b.jsx)(m.default,{className:"w-4 h-4"}),"Before & After (Optional)"]}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Add before and after images for an interactive comparison slider"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Before Image URL"}),(0,b.jsx)("input",{type:"url",value:B.before_image_url,onChange:a=>C({...B,before_image_url:a.target.value}),placeholder:"https://...",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"After Image URL"}),(0,b.jsx)("input",{type:"url",value:B.after_image_url,onChange:a=>C({...B,after_image_url:a.target.value}),placeholder:"https://...",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand"})]})]}),B.before_image_url&&B.after_image_url&&(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsx)("button",{onClick:()=>G(!F),className:"text-sm text-brand hover:underline mb-2",children:F?"Hide Preview":"Show Preview"}),F&&(0,b.jsx)(p.BeforeAfterSlider,{beforeImage:B.before_image_url,afterImage:B.after_image_url})]})]}),(0,b.jsxs)("div",{className:"space-y-4 pt-4 border-t border-gray-100",children:[(0,b.jsxs)("h3",{className:"font-medium text-gray-700 flex items-center gap-2",children:[(0,b.jsx)(k.ExternalLink,{className:"w-4 h-4"}),"External Link (Optional)"]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Live Demo / Project URL"}),(0,b.jsx)("input",{type:"url",value:B.external_url,onChange:a=>C({...B,external_url:a.target.value}),placeholder:"https://example.com",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand"})]})]}),(0,b.jsxs)("div",{className:"space-y-4 pt-4 border-t border-gray-100",children:[(0,b.jsxs)("h3",{className:"font-medium text-gray-700 flex items-center gap-2",children:[(0,b.jsx)(g.Star,{className:"w-4 h-4"}),"Client Testimonial (Optional)"]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quote"}),(0,b.jsx)("textarea",{value:B.testimonial_quote,onChange:a=>C({...B,testimonial_quote:a.target.value}),rows:2,placeholder:"What did the client say about the project?",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand"})]}),B.testimonial_quote&&(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Author Name"}),(0,b.jsx)("input",{type:"text",value:B.testimonial_author,onChange:a=>C({...B,testimonial_author:a.target.value}),placeholder:"Client name",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role/Title"}),(0,b.jsx)("input",{type:"text",value:B.testimonial_role,onChange:a=>C({...B,testimonial_role:a.target.value}),placeholder:"e.g., Homeowner",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rating"}),(0,b.jsxs)("select",{value:B.testimonial_rating,onChange:a=>C({...B,testimonial_rating:parseInt(a.target.value)}),className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand",children:[(0,b.jsx)("option",{value:5,children:"5 Stars"}),(0,b.jsx)("option",{value:4,children:"4 Stars"}),(0,b.jsx)("option",{value:3,children:"3 Stars"}),(0,b.jsx)("option",{value:2,children:"2 Stars"}),(0,b.jsx)("option",{value:1,children:"1 Star"})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4 pt-4 border-t border-gray-100",children:[(0,b.jsxs)("h3",{className:"font-medium text-gray-700 flex items-center gap-2",children:[(0,b.jsx)(n.default,{className:"w-4 h-4"}),"Visibility"]}),(0,b.jsxs)("div",{className:"flex items-center gap-6",children:[(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:B.is_active,onChange:a=>C({...B,is_active:a.target.checked}),className:"w-4 h-4 rounded text-brand focus:ring-brand"}),(0,b.jsx)("span",{className:"text-sm text-gray-700",children:"Show on portfolio page"})]}),(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:B.is_featured,onChange:a=>C({...B,is_featured:a.target.checked}),className:"w-4 h-4 rounded text-brand focus:ring-brand"}),(0,b.jsx)("span",{className:"text-sm text-gray-700",children:"Featured project"})]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-100",children:[(0,b.jsx)("button",{onClick:()=>y(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),(0,b.jsx)("button",{onClick:J,disabled:D||!B.title.trim(),className:"px-6 py-2 bg-brand text-gray-900 font-semibold rounded-lg hover:bg-brand-dark disabled:opacity-50 transition-colors",children:D?"Saving...":z?"Update Project":"Create Project"})]})]})})]})}a.s(["default",()=>s],583449)}];

//# sourceMappingURL=templates_services_app_admin_portfolio_page_tsx_6737b94b._.js.map