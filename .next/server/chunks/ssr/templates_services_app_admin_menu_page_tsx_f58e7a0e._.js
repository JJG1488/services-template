module.exports=[338927,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(915618),e=a.i(781560),f=a.i(405784),g=a.i(767552),h=a.i(784581),i=a.i(114548),j=a.i(596221),k=a.i(350611),k=k,l=a.i(633508);let m={vegetarian:{label:"Vegetarian",icon:"leaf",color:"#22c55e"},vegan:{label:"Vegan",icon:"sprout",color:"#16a34a"},"gluten-free":{label:"Gluten Free",icon:"wheat-off",color:"#f59e0b"},spicy:{label:"Spicy",icon:"flame",color:"#ef4444"},"nut-free":{label:"Nut Free",icon:"circle-slash",color:"#a16207"},"dairy-free":{label:"Dairy Free",icon:"droplet-off",color:"#3b82f6"},keto:{label:"Keto",icon:"bacon",color:"#8b5cf6"},halal:{label:"Halal",icon:"check-circle",color:"#059669"},kosher:{label:"Kosher",icon:"star",color:"#0891b2"}};function n(){let[a,e]=(0,c.useState)([]),[f,g]=(0,c.useState)(!0),[h,i]=(0,c.useState)(!1),[l,m]=(0,c.useState)(""),[n,q]=(0,c.useState)(new Set),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(null);async function A(a){i(!0);try{let b=localStorage.getItem("admin_token"),c=await fetch("/api/admin/menu/categories",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify({name:a})});if(c.ok){let a=await c.json();e(b=>[...b,{...a,items:[]}]),x(!1),q(b=>new Set(b).add(a.id))}}catch(a){console.error("Error creating category:",a)}finally{i(!1)}}async function B(a){if(confirm("Delete this category and all its items?"))try{let b=localStorage.getItem("admin_token");await fetch(`/api/admin/menu/categories/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${b}`}}),e(b=>b.filter(b=>b.id!==a))}catch(a){console.error("Error deleting category:",a)}}async function C(a,b){i(!0);try{let c=localStorage.getItem("admin_token"),d=await fetch("/api/admin/menu/items",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify({...b,category_id:a})});if(d.ok){let b=await d.json();e(c=>c.map(c=>c.id===a?{...c,items:[...c.items,b]}:c)),z(null)}}catch(a){console.error("Error creating item:",a)}finally{i(!1)}}async function D(a){i(!0);try{let b=localStorage.getItem("admin_token"),c=await fetch(`/api/admin/menu/items/${a.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify(a)});if(c.ok){let b=await c.json();e(c=>c.map(c=>({...c,items:c.items.map(c=>c.id===a.id?{...c,...b}:c)}))),t(null)}}catch(a){console.error("Error updating item:",a)}finally{i(!1)}}async function E(a,b){if(confirm("Delete this item?"))try{let c=localStorage.getItem("admin_token");await fetch(`/api/admin/menu/items/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${c}`}}),e(c=>c.map(c=>c.id===b?{...c,items:c.items.filter(b=>b.id!==a)}:c))}catch(a){console.error("Error deleting item:",a)}}return(0,c.useEffect)(()=>{!async function(){try{let a=localStorage.getItem("admin_token"),b=await fetch("/api/admin/menu/categories",{headers:{Authorization:`Bearer ${a}`}});if(b.ok){let c=await b.json(),d=await Promise.all(c.map(async b=>{let c=await fetch(`/api/admin/menu/items?category=${b.id}`,{headers:{Authorization:`Bearer ${a}`}}),d=c.ok?await c.json():[];return{...b,items:d}}));e(d)}}catch(a){console.error("Error fetching menu:",a),m("Failed to load menu")}finally{g(!1)}}()},[]),f?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,b.jsx)(j.Loader2,{className:"w-8 h-8 text-brand animate-spin"})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(k.default,{className:"w-7 h-7 text-brand"}),(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Menu Builder"})]}),(0,b.jsxs)("button",{onClick:()=>x(!0),className:"flex items-center gap-2 bg-brand text-gray-900 font-semibold px-4 py-2 rounded-lg hover:bg-brand-dark transition-colors",children:[(0,b.jsx)(d.Plus,{className:"w-5 h-5"}),"Add Category"]})]}),l&&(0,b.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg",children:l}),w&&(0,b.jsx)(o,{onSubmit:A,onCancel:()=>x(!1),saving:h}),0!==a.length||w?(0,b.jsx)("div",{className:"space-y-4",children:a.map(a=>(0,b.jsx)(p,{category:a,expanded:n.has(a.id),onToggle:()=>{var b;return b=a.id,void q(a=>{let c=new Set(a);return c.has(b)?c.delete(b):c.add(b),c})},onDelete:()=>B(a.id),onAddItem:()=>z(a.id),onEditItem:t,onDeleteItem:b=>E(b,a.id),showNewItemForm:y===a.id,onCreateItem:b=>C(a.id,b),onCancelNewItem:()=>z(null),saving:h},a.id))}):(0,b.jsxs)("div",{className:"bg-white rounded-xl p-12 text-center border border-gray-100",children:[(0,b.jsx)(k.default,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No menu categories yet"}),(0,b.jsx)("p",{className:"text-gray-500 mb-6",children:'Start by adding a category like "Appetizers" or "Main Courses"'}),(0,b.jsxs)("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 bg-brand text-gray-900 font-semibold px-6 py-3 rounded-lg hover:bg-brand-dark transition-colors",children:[(0,b.jsx)(d.Plus,{className:"w-5 h-5"}),"Add Your First Category"]})]}),s&&(0,b.jsx)(r,{item:s,categories:a,onSave:D,onCancel:()=>t(null),saving:h})]})}function o({onSubmit:a,onCancel:d,saving:e}){let[f,g]=(0,c.useState)("");return(0,b.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[(0,b.jsx)("h3",{className:"font-semibold mb-4",children:"New Category"}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("input",{type:"text",value:f,onChange:a=>g(a.target.value),placeholder:"e.g., Appetizers, Main Courses, Desserts",className:"flex-1 px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand",autoFocus:!0}),(0,b.jsx)("button",{onClick:()=>f.trim()&&a(f.trim()),disabled:!f.trim()||e,className:"px-4 py-2 bg-brand text-gray-900 font-semibold rounded-lg disabled:opacity-50",children:e?(0,b.jsx)(j.Loader2,{className:"w-5 h-5 animate-spin"}):"Create"}),(0,b.jsx)("button",{onClick:d,className:"px-4 py-2 text-gray-600 hover:text-gray-900",children:"Cancel"})]})]})}function p({category:a,expanded:c,onToggle:i,onDelete:j,onAddItem:l,onEditItem:n,onDeleteItem:o,showNewItemForm:p,onCreateItem:r,onCancelNewItem:s,saving:t}){return(0,b.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100 overflow-hidden",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 cursor-pointer hover:bg-gray-50",onClick:i,children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(h.GripVertical,{className:"w-5 h-5 text-gray-300"}),(0,b.jsx)("h3",{className:"font-semibold text-lg",children:a.name}),(0,b.jsxs)("span",{className:"text-sm text-gray-500",children:["(",a.items.length," items)"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:a=>{a.stopPropagation(),j()},className:"p-2 text-gray-400 hover:text-red-500 transition-colors",children:(0,b.jsx)(e.Trash2,{className:"w-4 h-4"})}),c?(0,b.jsx)(g.ChevronUp,{className:"w-5 h-5 text-gray-400"}):(0,b.jsx)(f.ChevronDown,{className:"w-5 h-5 text-gray-400"})]})]}),c&&(0,b.jsx)("div",{className:"border-t border-gray-100",children:0!==a.items.length||p?(0,b.jsxs)("div",{className:"divide-y divide-gray-50",children:[a.items.map(a=>{var c;return(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-3 hover:bg-gray-50",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(h.GripVertical,{className:"w-4 h-4 text-gray-300"}),a.image_url?(0,b.jsx)("img",{src:a.image_url,alt:a.name,className:"w-10 h-10 rounded-lg object-cover"}):(0,b.jsx)("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center",children:(0,b.jsx)(k.default,{className:"w-5 h-5 text-gray-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.name}),a.dietary_tags&&a.dietary_tags.length>0&&(0,b.jsx)("div",{className:"flex gap-1 mt-1",children:a.dietary_tags.slice(0,3).map(a=>(0,b.jsx)("span",{className:"text-xs px-1.5 py-0.5 bg-gray-100 text-gray-600 rounded",children:m[a]?.label||a},a))})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("span",{className:"font-medium text-gray-900",children:null==(c=a.price)?"Market Price":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:2}).format(c/100)}),(0,b.jsx)("span",{className:`text-xs px-2 py-0.5 rounded ${a.is_available?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:a.is_available?"Available":"Unavailable"}),(0,b.jsx)("button",{onClick:()=>n(a),className:"text-brand hover:text-brand-dark text-sm font-medium",children:"Edit"}),(0,b.jsx)("button",{onClick:()=>o(a.id),className:"text-gray-400 hover:text-red-500",children:(0,b.jsx)(e.Trash2,{className:"w-4 h-4"})})]})]},a.id)}),p&&(0,b.jsx)(q,{onSubmit:r,onCancel:s,saving:t}),!p&&(0,b.jsx)("div",{className:"px-6 py-3",children:(0,b.jsxs)("button",{onClick:l,className:"flex items-center gap-2 text-brand hover:text-brand-dark font-medium",children:[(0,b.jsx)(d.Plus,{className:"w-4 h-4"}),"Add Item"]})})]}):(0,b.jsxs)("div",{className:"px-6 py-8 text-center text-gray-500",children:[(0,b.jsx)("p",{className:"mb-3",children:"No items in this category"}),(0,b.jsx)("button",{onClick:l,className:"text-brand hover:text-brand-dark font-medium",children:"+ Add first item"})]})})]})}function q({onSubmit:a,onCancel:d,saving:e}){let[f,g]=(0,c.useState)(""),[h,i]=(0,c.useState)(""),[k,l]=(0,c.useState)("");return(0,b.jsxs)("div",{className:"px-6 py-4 bg-gray-50",children:[(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsx)("input",{type:"text",value:f,onChange:a=>g(a.target.value),placeholder:"Item name",className:"px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand",autoFocus:!0}),(0,b.jsx)("input",{type:"number",value:h,onChange:a=>i(a.target.value),placeholder:"Price (e.g., 12.99)",step:"0.01",className:"px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand"}),(0,b.jsx)("input",{type:"text",value:k,onChange:a=>l(a.target.value),placeholder:"Description (optional)",className:"px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand"})]}),(0,b.jsxs)("div",{className:"flex gap-3 mt-3",children:[(0,b.jsx)("button",{onClick:()=>f.trim()&&a({name:f.trim(),price:h?Math.round(100*parseFloat(h)):void 0,description:k.trim()||void 0}),disabled:!f.trim()||e,className:"px-4 py-2 bg-brand text-gray-900 font-semibold rounded-lg disabled:opacity-50",children:e?(0,b.jsx)(j.Loader2,{className:"w-5 h-5 animate-spin"}):"Add"}),(0,b.jsx)("button",{onClick:d,className:"px-4 py-2 text-gray-600",children:"Cancel"})]})]})}function r({item:a,categories:d,onSave:e,onCancel:f,saving:g}){let[h,k]=(0,c.useState)({...a,price:a.price?(a.price/100).toString():"",dietary_tags:a.dietary_tags||[]});return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:f,children:(0,b.jsxs)("div",{className:"bg-white rounded-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Edit Item"}),(0,b.jsx)("button",{onClick:f,className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,b.jsx)(l.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),(0,b.jsx)("input",{type:"text",value:h.name,onChange:a=>k(b=>({...b,name:a.target.value})),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,b.jsx)("textarea",{value:h.description||"",onChange:a=>k(b=>({...b,description:a.target.value})),rows:3,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price ($)"}),(0,b.jsx)("input",{type:"number",step:"0.01",value:h.price,onChange:a=>k(b=>({...b,price:a.target.value})),placeholder:"Leave empty for Market Price",className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),(0,b.jsx)("select",{value:h.category_id||"",onChange:a=>k(b=>({...b,category_id:a.target.value})),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand",children:d.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dietary Tags"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:["vegetarian","vegan","gluten-free","spicy","nut-free","dairy-free"].map(a=>(0,b.jsx)("button",{type:"button",onClick:()=>{k(b=>({...b,dietary_tags:b.dietary_tags.includes(a)?b.dietary_tags.filter(b=>b!==a):[...b.dietary_tags,a]}))},className:`px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${h.dietary_tags.includes(a)?"bg-brand text-gray-900":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:m[a]?.label||a},a))})]}),(0,b.jsxs)("div",{className:"flex gap-6",children:[(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:h.is_available,onChange:a=>k(b=>({...b,is_available:a.target.checked})),className:"w-4 h-4 text-brand rounded"}),(0,b.jsx)("span",{children:"Available"})]}),(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:h.is_featured,onChange:a=>k(b=>({...b,is_featured:a.target.checked})),className:"w-4 h-4 text-brand rounded"}),(0,b.jsx)("span",{children:"Featured"})]})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 px-6 py-4 border-t",children:[(0,b.jsx)("button",{onClick:f,className:"px-4 py-2 text-gray-600 hover:text-gray-900",children:"Cancel"}),(0,b.jsxs)("button",{onClick:function(){e({...h,price:h.price?Math.round(100*parseFloat(h.price)):void 0})},disabled:g,className:"flex items-center gap-2 px-6 py-2 bg-brand text-gray-900 font-semibold rounded-lg disabled:opacity-50",children:[g?(0,b.jsx)(j.Loader2,{className:"w-5 h-5 animate-spin"}):(0,b.jsx)(i.Save,{className:"w-5 h-5"}),"Save Changes"]})]})]})})}a.s(["default",()=>n],338927)}];

//# sourceMappingURL=templates_services_app_admin_menu_page_tsx_f58e7a0e._.js.map