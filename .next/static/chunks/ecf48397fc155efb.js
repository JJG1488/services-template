(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,88746,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(22016),s=e.i(18566),n=e.i(92161),l=e.i(37727);let i=(0,a.createContext)(null);function d({onLogin:e}){let[r,s]=(0,a.useState)(""),[n,l]=(0,a.useState)(""),[i,d]=(0,a.useState)(!1);async function o(t){t.preventDefault(),l(""),d(!0),await e(r)||l("Invalid password"),d(!1)}return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,t.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Admin Login"}),(0,t.jsxs)("form",{onSubmit:o,children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,t.jsx)("input",{id:"password",type:"password",value:r,onChange:e=>s(e.target.value),placeholder:"Enter admin password",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand",autoFocus:!0})]}),n&&(0,t.jsx)("div",{className:"text-sm mb-4 p-3 rounded-lg bg-red-50 border border-red-200",children:(0,t.jsx)("p",{className:"text-red-600",children:n})}),(0,t.jsx)("button",{type:"submit",disabled:i,className:"w-full bg-brand text-gray-900 font-semibold py-3 rounded-lg hover:bg-brand-dark disabled:opacity-50 transition-colors",children:i?"Verifying...":"Login"})]})]})})}function o({onLogout:e}){let i=(0,s.usePathname)(),[d,o]=(0,a.useState)(!1);(0,a.useEffect)(()=>{o(!1)},[i]);let c=[{href:"/admin",label:"Dashboard"},{href:"/admin/services",label:"Services"},{href:"/admin/inquiries",label:"Inquiries"},{href:"/admin/settings",label:"Settings"}];return(0,t.jsxs)("nav",{className:"bg-gray-900 text-white",children:[(0,t.jsx)("div",{className:"max-w-6xl mx-auto px-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,t.jsx)(r.default,{href:"/admin",className:"font-bold text-lg",children:"Admin"}),(0,t.jsxs)("div",{className:"hidden md:flex items-center gap-6",children:[c.map(e=>(0,t.jsx)(r.default,{href:e.href,className:"hover:text-gray-300 "+(i===e.href?"text-white font-medium":"text-gray-400"),children:e.label},e.href)),(0,t.jsx)(r.default,{href:"/",className:"text-gray-400 hover:text-white text-sm",children:"View Site"}),(0,t.jsx)("button",{onClick:e,className:"text-gray-400 hover:text-white text-sm ml-2 px-3 py-1 border border-gray-600 rounded hover:border-gray-400 transition-colors",children:"Sign Out"})]}),(0,t.jsx)("button",{className:"md:hidden p-2 text-gray-400 hover:text-white",onClick:()=>o(!d),"aria-label":"Toggle menu",children:d?(0,t.jsx)(l.X,{className:"w-6 h-6"}):(0,t.jsx)(n.Menu,{className:"w-6 h-6"})})]})}),d&&(0,t.jsx)("div",{className:"md:hidden border-t border-gray-800",children:(0,t.jsxs)("div",{className:"px-4 py-3 space-y-1",children:[c.map(e=>(0,t.jsx)(r.default,{href:e.href,className:"block py-2 px-3 rounded-lg "+(i===e.href?"bg-gray-800 text-white font-medium":"text-gray-400 hover:bg-gray-800 hover:text-white"),children:e.label},e.href)),(0,t.jsx)("hr",{className:"border-gray-700 my-2"}),(0,t.jsx)(r.default,{href:"/",className:"block py-2 px-3 rounded-lg text-gray-400 hover:bg-gray-800 hover:text-white",children:"View Site"}),(0,t.jsx)("button",{onClick:e,className:"block w-full text-left py-2 px-3 rounded-lg text-gray-400 hover:bg-gray-800 hover:text-white",children:"Sign Out"})]})})]})}function c({children:e}){let[r,s]=(0,a.useState)(!1),[n,l]=(0,a.useState)(!0);async function c(e){try{let t=await fetch("/api/admin/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e})});if(t.ok){let{token:e}=await t.json();return localStorage.setItem("admin_token",e),s(!0),!0}return!1}catch{return!1}}function m(){localStorage.removeItem("admin_token"),s(!1)}return((0,a.useEffect)(()=>{let e=localStorage.getItem("admin_token");e?fetch("/api/admin/verify",{headers:{Authorization:"Bearer "+e}}).then(e=>{e.ok?s(!0):localStorage.removeItem("admin_token")}).catch(()=>localStorage.removeItem("admin_token")).finally(()=>l(!1)):l(!1)},[]),n)?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("p",{children:"Loading..."})}):r?(0,t.jsx)(i.Provider,{value:{isAuthenticated:r,login:c,logout:m},children:(0,t.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,t.jsx)(o,{onLogout:m}),(0,t.jsx)("main",{className:"max-w-6xl mx-auto px-4 py-8",children:e})]})}):(0,t.jsx)(d,{onLogin:c})}e.s(["default",()=>c],88746)}]);