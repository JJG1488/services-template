(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,631171,399219,e=>{"use strict";var a=e.i(475254);let t=(0,a.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["default",()=>t],631171);let r=(0,a.default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);e.s(["default",()=>r],399219)},356909,251854,e=>{"use strict";let a=(0,e.i(475254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["default",()=>a],251854),e.s(["Save",()=>a],356909)},727612,612329,e=>{"use strict";let a=(0,e.i(475254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["default",()=>a],612329),e.s(["Trash2",()=>a],727612)},107233,603908,738125,750570,e=>{"use strict";var a=e.i(475254);let t=(0,a.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["default",()=>t],603908),e.s(["Plus",()=>t],107233);let r=(0,a.default)("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);e.s(["default",()=>r],738125),e.s(["GripVertical",()=>r],750570)},531278,717521,e=>{"use strict";let a=(0,e.i(475254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["default",()=>a],717521),e.s(["Loader2",()=>a],531278)},963032,e=>{"use strict";let a=(0,e.i(475254).default)("utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]);e.s(["default",()=>a])},664659,655900,e=>{"use strict";var a=e.i(631171);e.s(["ChevronDown",()=>a.default],664659);var t=e.i(399219);e.s(["ChevronUp",()=>t.default],655900)},766635,e=>{"use strict";var a=e.i(843476),t=e.i(271645),r=e.i(107233),s=e.i(727612),i=e.i(664659),l=e.i(655900),n=e.i(750570),c=e.i(356909),o=e.i(531278),d=e.i(963032),d=d,m=e.i(37727);let u={vegetarian:{label:"Vegetarian",icon:"leaf",color:"#22c55e"},vegan:{label:"Vegan",icon:"sprout",color:"#16a34a"},"gluten-free":{label:"Gluten Free",icon:"wheat-off",color:"#f59e0b"},spicy:{label:"Spicy",icon:"flame",color:"#ef4444"},"nut-free":{label:"Nut Free",icon:"circle-slash",color:"#a16207"},"dairy-free":{label:"Dairy Free",icon:"droplet-off",color:"#3b82f6"},keto:{label:"Keto",icon:"bacon",color:"#8b5cf6"},halal:{label:"Halal",icon:"check-circle",color:"#059669"},kosher:{label:"Kosher",icon:"star",color:"#0891b2"}};function x(){let[e,s]=(0,t.useState)([]),[i,l]=(0,t.useState)(!0),[n,c]=(0,t.useState)(!1),[m,u]=(0,t.useState)(""),[x,p]=(0,t.useState)(new Set),[f,b]=(0,t.useState)(null),[j,v]=(0,t.useState)(null),[N,k]=(0,t.useState)(!1),[w,C]=(0,t.useState)(null);async function S(e){c(!0);try{let a=localStorage.getItem("admin_token"),t=await fetch("/api/admin/menu/categories",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({name:e})});if(t.ok){let e=await t.json();s(a=>[...a,{...e,items:[]}]),k(!1),p(a=>new Set(a).add(e.id))}}catch(e){console.error("Error creating category:",e)}finally{c(!1)}}async function _(e){if(confirm("Delete this category and all its items?"))try{let a=localStorage.getItem("admin_token");await fetch(`/api/admin/menu/categories/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}}),s(a=>a.filter(a=>a.id!==e))}catch(e){console.error("Error deleting category:",e)}}async function M(e,a){c(!0);try{let t=localStorage.getItem("admin_token"),r=await fetch("/api/admin/menu/items",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({...a,category_id:e})});if(r.ok){let a=await r.json();s(t=>t.map(t=>t.id===e?{...t,items:[...t.items,a]}:t)),C(null)}}catch(e){console.error("Error creating item:",e)}finally{c(!1)}}async function A(e){c(!0);try{let a=localStorage.getItem("admin_token"),t=await fetch(`/api/admin/menu/items/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(e)});if(t.ok){let a=await t.json();s(t=>t.map(t=>({...t,items:t.items.map(t=>t.id===e.id?{...t,...a}:t)}))),b(null)}}catch(e){console.error("Error updating item:",e)}finally{c(!1)}}async function T(e,a){if(confirm("Delete this item?"))try{let t=localStorage.getItem("admin_token");await fetch(`/api/admin/menu/items/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}}),s(t=>t.map(t=>t.id===a?{...t,items:t.items.filter(a=>a.id!==e)}:t))}catch(e){console.error("Error deleting item:",e)}}return(0,t.useEffect)(()=>{!async function(){try{let e=localStorage.getItem("admin_token"),a=await fetch("/api/admin/menu/categories",{headers:{Authorization:`Bearer ${e}`}});if(a.ok){let t=await a.json(),r=await Promise.all(t.map(async a=>{let t=await fetch(`/api/admin/menu/items?category=${a.id}`,{headers:{Authorization:`Bearer ${e}`}}),r=t.ok?await t.json():[];return{...a,items:r}}));s(r)}}catch(e){console.error("Error fetching menu:",e),u("Failed to load menu")}finally{l(!1)}}()},[]),i?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsx)(o.Loader2,{className:"w-8 h-8 text-brand animate-spin"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(d.default,{className:"w-7 h-7 text-brand"}),(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Menu Builder"})]}),(0,a.jsxs)("button",{onClick:()=>k(!0),className:"flex items-center gap-2 bg-brand text-gray-900 font-semibold px-4 py-2 rounded-lg hover:bg-brand-dark transition-colors",children:[(0,a.jsx)(r.Plus,{className:"w-5 h-5"}),"Add Category"]})]}),m&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg",children:m}),N&&(0,a.jsx)(g,{onSubmit:S,onCancel:()=>k(!1),saving:n}),0!==e.length||N?(0,a.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,a.jsx)(h,{category:e,expanded:x.has(e.id),onToggle:()=>{var a;return a=e.id,void p(e=>{let t=new Set(e);return t.has(a)?t.delete(a):t.add(a),t})},onDelete:()=>_(e.id),onAddItem:()=>C(e.id),onEditItem:b,onDeleteItem:a=>T(a,e.id),showNewItemForm:w===e.id,onCreateItem:a=>M(e.id,a),onCancelNewItem:()=>C(null),saving:n},e.id))}):(0,a.jsxs)("div",{className:"bg-white rounded-xl p-12 text-center border border-gray-100",children:[(0,a.jsx)(d.default,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No menu categories yet"}),(0,a.jsx)("p",{className:"text-gray-500 mb-6",children:'Start by adding a category like "Appetizers" or "Main Courses"'}),(0,a.jsxs)("button",{onClick:()=>k(!0),className:"inline-flex items-center gap-2 bg-brand text-gray-900 font-semibold px-6 py-3 rounded-lg hover:bg-brand-dark transition-colors",children:[(0,a.jsx)(r.Plus,{className:"w-5 h-5"}),"Add Your First Category"]})]}),f&&(0,a.jsx)(y,{item:f,categories:e,onSave:A,onCancel:()=>b(null),saving:n})]})}function g({onSubmit:e,onCancel:r,saving:s}){let[i,l]=(0,t.useState)("");return(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[(0,a.jsx)("h3",{className:"font-semibold mb-4",children:"New Category"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("input",{type:"text",value:i,onChange:e=>l(e.target.value),placeholder:"e.g., Appetizers, Main Courses, Desserts",className:"flex-1 px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand",autoFocus:!0}),(0,a.jsx)("button",{onClick:()=>i.trim()&&e(i.trim()),disabled:!i.trim()||s,className:"px-4 py-2 bg-brand text-gray-900 font-semibold rounded-lg disabled:opacity-50",children:s?(0,a.jsx)(o.Loader2,{className:"w-5 h-5 animate-spin"}):"Create"}),(0,a.jsx)("button",{onClick:r,className:"px-4 py-2 text-gray-600 hover:text-gray-900",children:"Cancel"})]})]})}function h({category:e,expanded:t,onToggle:c,onDelete:o,onAddItem:m,onEditItem:x,onDeleteItem:g,showNewItemForm:h,onCreateItem:y,onCancelNewItem:f,saving:b}){return(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100 overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 cursor-pointer hover:bg-gray-50",onClick:c,children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(n.GripVertical,{className:"w-5 h-5 text-gray-300"}),(0,a.jsx)("h3",{className:"font-semibold text-lg",children:e.name}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["(",e.items.length," items)"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),o()},className:"p-2 text-gray-400 hover:text-red-500 transition-colors",children:(0,a.jsx)(s.Trash2,{className:"w-4 h-4"})}),t?(0,a.jsx)(l.ChevronUp,{className:"w-5 h-5 text-gray-400"}):(0,a.jsx)(i.ChevronDown,{className:"w-5 h-5 text-gray-400"})]})]}),t&&(0,a.jsx)("div",{className:"border-t border-gray-100",children:0!==e.items.length||h?(0,a.jsxs)("div",{className:"divide-y divide-gray-50",children:[e.items.map(e=>{var t;return(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 py-3 hover:bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(n.GripVertical,{className:"w-4 h-4 text-gray-300"}),e.image_url?(0,a.jsx)("img",{src:e.image_url,alt:e.name,className:"w-10 h-10 rounded-lg object-cover"}):(0,a.jsx)("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(d.default,{className:"w-5 h-5 text-gray-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.name}),e.dietary_tags&&e.dietary_tags.length>0&&(0,a.jsx)("div",{className:"flex gap-1 mt-1",children:e.dietary_tags.slice(0,3).map(e=>(0,a.jsx)("span",{className:"text-xs px-1.5 py-0.5 bg-gray-100 text-gray-600 rounded",children:u[e]?.label||e},e))})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:null==(t=e.price)?"Market Price":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:2}).format(t/100)}),(0,a.jsx)("span",{className:`text-xs px-2 py-0.5 rounded ${e.is_available?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.is_available?"Available":"Unavailable"}),(0,a.jsx)("button",{onClick:()=>x(e),className:"text-brand hover:text-brand-dark text-sm font-medium",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>g(e.id),className:"text-gray-400 hover:text-red-500",children:(0,a.jsx)(s.Trash2,{className:"w-4 h-4"})})]})]},e.id)}),h&&(0,a.jsx)(p,{onSubmit:y,onCancel:f,saving:b}),!h&&(0,a.jsx)("div",{className:"px-6 py-3",children:(0,a.jsxs)("button",{onClick:m,className:"flex items-center gap-2 text-brand hover:text-brand-dark font-medium",children:[(0,a.jsx)(r.Plus,{className:"w-4 h-4"}),"Add Item"]})})]}):(0,a.jsxs)("div",{className:"px-6 py-8 text-center text-gray-500",children:[(0,a.jsx)("p",{className:"mb-3",children:"No items in this category"}),(0,a.jsx)("button",{onClick:m,className:"text-brand hover:text-brand-dark font-medium",children:"+ Add first item"})]})})]})}function p({onSubmit:e,onCancel:r,saving:s}){let[i,l]=(0,t.useState)(""),[n,c]=(0,t.useState)(""),[d,m]=(0,t.useState)("");return(0,a.jsxs)("div",{className:"px-6 py-4 bg-gray-50",children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsx)("input",{type:"text",value:i,onChange:e=>l(e.target.value),placeholder:"Item name",className:"px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand",autoFocus:!0}),(0,a.jsx)("input",{type:"number",value:n,onChange:e=>c(e.target.value),placeholder:"Price (e.g., 12.99)",step:"0.01",className:"px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand"}),(0,a.jsx)("input",{type:"text",value:d,onChange:e=>m(e.target.value),placeholder:"Description (optional)",className:"px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand"})]}),(0,a.jsxs)("div",{className:"flex gap-3 mt-3",children:[(0,a.jsx)("button",{onClick:()=>i.trim()&&e({name:i.trim(),price:n?Math.round(100*parseFloat(n)):void 0,description:d.trim()||void 0}),disabled:!i.trim()||s,className:"px-4 py-2 bg-brand text-gray-900 font-semibold rounded-lg disabled:opacity-50",children:s?(0,a.jsx)(o.Loader2,{className:"w-5 h-5 animate-spin"}):"Add"}),(0,a.jsx)("button",{onClick:r,className:"px-4 py-2 text-gray-600",children:"Cancel"})]})]})}function y({item:e,categories:r,onSave:s,onCancel:i,saving:l}){let[n,d]=(0,t.useState)({...e,price:e.price?(e.price/100).toString():"",dietary_tags:e.dietary_tags||[]});return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:i,children:(0,a.jsxs)("div",{className:"bg-white rounded-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Edit Item"}),(0,a.jsx)("button",{onClick:i,className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,a.jsx)(m.X,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),(0,a.jsx)("input",{type:"text",value:n.name,onChange:e=>d(a=>({...a,name:e.target.value})),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,a.jsx)("textarea",{value:n.description||"",onChange:e=>d(a=>({...a,description:e.target.value})),rows:3,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price ($)"}),(0,a.jsx)("input",{type:"number",step:"0.01",value:n.price,onChange:e=>d(a=>({...a,price:e.target.value})),placeholder:"Leave empty for Market Price",className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),(0,a.jsx)("select",{value:n.category_id||"",onChange:e=>d(a=>({...a,category_id:e.target.value})),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand",children:r.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dietary Tags"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:["vegetarian","vegan","gluten-free","spicy","nut-free","dairy-free"].map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>{d(a=>({...a,dietary_tags:a.dietary_tags.includes(e)?a.dietary_tags.filter(a=>a!==e):[...a.dietary_tags,e]}))},className:`px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${n.dietary_tags.includes(e)?"bg-brand text-gray-900":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:u[e]?.label||e},e))})]}),(0,a.jsxs)("div",{className:"flex gap-6",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:n.is_available,onChange:e=>d(a=>({...a,is_available:e.target.checked})),className:"w-4 h-4 text-brand rounded"}),(0,a.jsx)("span",{children:"Available"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:n.is_featured,onChange:e=>d(a=>({...a,is_featured:e.target.checked})),className:"w-4 h-4 text-brand rounded"}),(0,a.jsx)("span",{children:"Featured"})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 px-6 py-4 border-t",children:[(0,a.jsx)("button",{onClick:i,className:"px-4 py-2 text-gray-600 hover:text-gray-900",children:"Cancel"}),(0,a.jsxs)("button",{onClick:function(){s({...n,price:n.price?Math.round(100*parseFloat(n.price)):void 0})},disabled:l,className:"flex items-center gap-2 px-6 py-2 bg-brand text-gray-900 font-semibold rounded-lg disabled:opacity-50",children:[l?(0,a.jsx)(o.Loader2,{className:"w-5 h-5 animate-spin"}):(0,a.jsx)(c.Save,{className:"w-5 h-5"}),"Save Changes"]})]})]})})}e.s(["default",()=>x],766635)}]);